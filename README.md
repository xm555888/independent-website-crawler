# 流量套餐爬虫

## 简介
这个项目是一个用于爬取移动套餐信息的 Python 脚本。它使用异步网络爬虫技术，从指定的网页中提取有关移动套餐的数据，并将提取的信息保存到 Excel 文件中。该脚本还实现了重试机制，以确保在提取信息时的稳定性。

## 功能
- **URL 格式化**：确保输入的 URL 是有效的格式。
- **安全文件名生成**：根据 URL 生成安全的文件名，避免文件名过长或包含非法字符。
- **信息提取**：从网页中提取移动套餐相关的信息，包括公司名称、套餐名称、价格等。
- **重试机制**：在提取信息失败时，自动重试多次以提高成功率。
- **数据保存**：将提取到的套餐信息保存为 Excel 文件，并将网页的 HTML 源码保存为 HTML 文件。

## 依赖
在运行此脚本之前，请确保安装以下 Python 库：
- `pandas`
- `crawl4ai`
- `asyncio`
- `openpyxl`（用于保存 Excel 文件）

可以使用以下命令安装所需的库：
```bash
pip install pandas crawl4ai openpyxl
```

## 使用方法
1. **准备 URL 列表**：在项目目录下创建一个名为 `url.xlsx` 的 Excel 文件，并在其中的 `url` 列中列出要爬取的网页 URL。
   
2. **运行脚本**：在命令行中导航到项目目录并运行以下命令：
   ```bash
   python Spider_mobile_clinet.py
   ```

3. **查看结果**：
   - 提取的信息将保存在 `extracted_info/packages_info.xlsx` 文件中。
   - 网页的 HTML 源码将保存在 `source_codes/` 文件夹中，文件名基于 URL 生成。
   - 如果有任何 URL 访问失败，失败的 URL 将记录在 `failed_urls.log` 文件中。

## 注意事项
- 确保在运行脚本时，您的网络连接正常。
- 请根据需要调整脚本中的配置，例如浏览器设置和提取策略。
- 该脚本使用了 `deepseek` 作为信息提取的提供商，请确保您有有效的 API 令牌。

## 贡献
欢迎任何形式的贡献！如果您发现了错误或有改进建议，请提交问题或拉取请求。

## 许可证
本项目采用 MIT 许可证，详细信息请查看 LICENSE 文件。
